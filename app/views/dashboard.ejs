<%- include('header') %>

     <script> 
    
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawCharts);

      var passes = <%= overall.pass %>;
      var fails = <%= overall.fail %>;
      var others = <%= overall.skip %>;
      


      // Draw the chart and set the chart values
      function drawCharts() {


         /////////////////////////////////// Pie Chart /////////////////////

        var data = google.visualization.arrayToDataTable([
          ['Test', 'Passed or Failed'],
          ['Passed', passes],
          ['Failed', fails],
          ['Other', others],
        ]);
          // Optional; add a title and set the width and height of the chart
          // Options can be variables such as title: $Title

        if (<%= language =='ALL' %>) {
           var legendLocation = {textStyle:{fontSize:20}, alignment: 'center', position: 'left'};
           var myTitle = '<%= language %> Language, <%= feature %> Feature Pages';
         } else {
          var legendLocation = 'none';
          var myTitle = '';
         };

        var options = {

          'title':myTitle,
          'titleTextStyle':{fontSize:20, bold:true, color:'grey'},
          'colors': ['green', '#E2453C', 'grey'], 
          'backgroundColor':'', 
          'is3D': true,
          'chartArea':{width:'350', height:'80%'},
          'legend':legendLocation,
          'slices': { 0: {offset:0.0},
                    1: {offset: 0.2},
                    2: {offset: 0.0}}
        };
         //    'legend':{textStyle:{fontSize:20}, alignment: 'center', position: 'left'},


        // Display the chart inside the <div> element with id="pieChart"
        var chart = new google.visualization.PieChart(document.getElementById('pieChart'));
        chart.draw(data, options);




        // google.visualization.events.addListener(piechart, 'select', function() {
        //     //var selectionIdx = PieChart.getSelection()[0].row;
        //     //var stateName = data.getValue(selectionIdx, 0);
          
        //  // if (value == '1') {
        //   window.open('https://www.gooogle.com');
        //   //    });
        // };


          /////////////////////////////////// Bar Chart /////////////////////

        var data2 = google.visualization.arrayToDataTable([
          ['Test', 'Pass', 'Fail', 'Other', { role: 'annotation'} ],

          <% if(resultsTotal){ %>
          <% for(var i=0; i < resultsTotal.length; i++) { %>
          ['<%= resultsTotal[i].feature %>', <%= resultsTotal[i].pass%>, <%= resultsTotal[i].fail%>, <%= resultsTotal[i].skip%>, ''], 
          <% }} %>

        ]);

          // Optional; add a title and set the width and height of the chart
          // Options can be variables such as title: $Title
        var options2 = {

          'title': '<%= language %> language, by Feature Pages',

          'isStacked':'percent',
          'titleTextStyle':{fontSize:20, bold:true, color:'grey'},
          'colors': ['green', '#E2453C', 'grey'], 
          'backgroundColor':'', 
          'is3D': true,
          'chartArea':{width:'350', height:'80%'},
          'legend':{textStyle:{fontSize:20}, alignment: 'center', position: 'left'},
          'hAxis': {
            'minValue':0,
            'ticks':[0, .3, .6, .9, 1]
           }
        };

        // Display the chart inside the <div> element with id="pieChart"
        var chart2 = new google.visualization.BarChart(document.getElementById('barGraph'));
        chart2.draw(data2, options2);
      }

  </script> 

      <h1><%= language %></h1>

    </div><!-- end .col-sm-12 -->
  </div><!-- end .row -->
	<br><br>


  <div class="col-lg-6 row myChart">


  <% if(language != "ALL"){ %>
  <div style="width:200px;float:left;">Drill-Down Links:</div>
  <!-- app.get('/allresults/:locale/:testResult/:page', api_results.getResultByLangAndTestResult); -->
  <a href="/allresults/<%= language %>/PASS"><div class="legend Pass"></div><div class="LinksToResults">Pass</div></a>
  <a href="/allresults/<%= language %>/FAIL"><div class="legend Fail"></div><div class="LinksToResults">Fail</div></a>
  <a href="/allresults/<%= language %>/SKIP"><div class="legend Skip"></div><div class="LinksToResults">Skip</div></a>
  <br><br>
  <%}%>


   	<div id="pieChart">Chart</div>


      <% if(resultsTotal){ %>

        <p> See individual test results by Feature Page.</p>
        
          <% for(var i=1; i < 25; i++) { %>

        <a href='/results/f<%= [i] %>/<%= language %>'>
          <button type="button" class="btn btn-primary AtTenPerc">
            <b>F<%= [i] %></b>
            <br>
          </button>
        </a>

      <%}}%>


  </div>


  <% if(resultsTotal){ %>

    <div class="col-lg-6 row">
        <div id="barGraph" class="pieChart">BarGraph</div>
    </div>

  <% } else{ %>
    <div class="col-lg-6 row">
    <br>
        <h2> Click on the links below to get detailed information on the performance of each language locale.</h2>
        <h2> Please note that results may take a minute to load.</h2>
    </div>

    <div class="col-lg-12 row">
     <% for(var i=0; i < languagesArray.length; i++) { %>
    <div class ="col-sm-1">
      <a href='/result-by-language/<%= languagesArray[i].Language %>'>
          <button type="button" class="btn btn-primary AtHundPerc">
            <b><%= languagesArray[i].Language %></b>
            <br>
          </button>
      </a>
    </div>

  <%}}%>

  </div>

<br><br><br><br><br><br>
</div>
<%- include('footer') %>